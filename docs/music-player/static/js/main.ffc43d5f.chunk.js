(this["webpackJsonpmusic-player"]=this["webpackJsonpmusic-player"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(6),o=n.n(c),s=n(1),i=n(3),l=n(0),u=Object(a.createContext)(),m="assets/images/covers/RaceGurramFront.jpg",d={playList:[],currentSong:{},isSongPlaying:!1,cover:m,currentView:"musicPlayer",playerVolume:.4,isVolumeControl:!1,volumeIcon:"fa-volume-down",action:""},j=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=parseInt(10*Math.random());if(n>=0&&n<t.length)return n;e(t)};function p(e,t){switch(t.type){case"play":return Object(s.a)(Object(s.a)({},e),{},{isSongPlaying:!0,action:t.type});case"pause":return Object(s.a)(Object(s.a)({},e),{},{isSongPlaying:!1,action:t.type});case"previous":var n=e.playList.findIndex((function(t){return t.name===e.currentSong.name})),a={};return a=n<=0?e.playList[e.playList.length-1]:n>0&&n<=e.playList.length-1?e.playList[n-1]:e.currentSong,Object(s.a)(Object(s.a)({},e),{},{currentSong:Object(s.a)(Object(s.a)({},a),{},{cover:m})});case"next":var r={},c=e.playList.findIndex((function(t){return t.name===e.currentSong.name}));return"This"!==e.loopSongs&&(c+=1),r="Loop"===e.loopSongs||c<e.playList.length-1?e.playList[c]:e.playList[0],Object(s.a)(Object(s.a)({},e),{},{currentSong:Object(s.a)(Object(s.a)({},r),{},{cover:m})});case"random":var o=j(e.playList)||0;return Object(s.a)(Object(s.a)({},e),{},{currentSong:Object(s.a)(Object(s.a)({},e.playList[o]),{},{cover:m})});case"setSongs":var i=t.payload;return Object(s.a)(Object(s.a)({},e),{},{playList:i});case"setCurrentSong":var l=t.payload;return Object(s.a)(Object(s.a)({},e),{},{currentSong:Object(s.a)(Object(s.a)({},l),{},{cover:m})});case"setCurrentView":var u=t.payload.currentView;return Object(s.a)(Object(s.a)({},e),{},{currentView:u});case"playSong":var d=t.payload.song;return Object(s.a)(Object(s.a)({},e),{},{currentView:"musicPlayer",currentSong:Object(s.a)(Object(s.a)({},d),{},{cover:m}),isSongPlaying:!1});case"setVolume":var p=t.payload,b=p.playerVolume,v=p.volumeIcon;return Object(s.a)(Object(s.a)({},e),{},{playerVolume:b,volumeIcon:v});case"showVolumeControl":var f=t.payload.isVolumeControl;return Object(s.a)(Object(s.a)({},e),{},{isVolumeControl:f});case"setLoopSongs":var O;return"Once"===e.loopSongs?O="Loop":"Loop"===e.loopSongs?O="This":"This"===e.loopSongs&&(O="Once"),Object(s.a)(Object(s.a)({},e),{},{loopSongs:O});default:throw new Error("Unhandled action type: ".concat(t.type))}}function b(e){var t=e.children,n=Object(a.useReducer)(p,d),r=Object(i.a)(n,2),c=r[0],o=r[1];return Object(l.jsx)(u.Provider,{value:{dispatch:o,state:c},children:t})}function v(){var e=Object(a.useContext)(u);if(void 0===e)throw new Error("useAppContext must be used within a AppContextProvider");return e}n(12);var f=function(e){var t=e.Heading,n=v(),a=n.state,r=n.dispatch;return Object(l.jsxs)("div",{className:"top-nav",children:["musicPlayer"!==a.currentView&&Object(l.jsx)("label",{title:"back",onClick:function(){return r({type:"setCurrentView",payload:{currentView:"musicPlayer"}})},children:Object(l.jsx)("i",{className:"fas fa-long-arrow-alt-left"})}),Object(l.jsx)("span",{className:"title",children:t}),"musicPlayer"===a.currentView&&Object(l.jsx)("label",{title:"Play List",className:"list-songs",onClick:function(){return r({type:"setCurrentView",payload:{currentView:"PlayList"}})},children:Object(l.jsx)("i",{className:"fas fa-list"})})]})},O=(n(13),function(e){var t=e.album,n=e.currentSong,a=e.isSongPlaying,r=e.className,c=v().dispatch;return Object(l.jsx)("div",{className:"".concat(r," player-back"),children:Object(l.jsx)("div",{className:"play-list",children:Object(l.jsx)("ul",{children:t.map((function(e,t){return Object(l.jsxs)("li",{className:n.name===e.name&&a?"song-item active":"song-item",onClick:function(){return function(e){c({type:"playSong",payload:{song:e}})}(e)},children:[Object(l.jsxs)("div",{className:"info",children:[Object(l.jsx)("p",{className:"song-title",children:e.name}),Object(l.jsx)("p",{className:"artist",children:e.artist})]}),Object(l.jsx)("div",{className:"status",children:n.name===e.name&&a&&Object(l.jsx)("i",{className:"fa fa-signal",title:"Playing"})})]},t)}))})})})}),g="assets/images/covers/RaceGurramFront.jpg",y=[{name:"01 - Boochade Boochade.mp3",cover:g},{name:"02 - Gala Gala.mp3",cover:g},{name:"03 - Cinema Choopistha Mava.mp3",cover:g},{name:"04 - Sweety.mp3",cover:g},{name:"05 - Down Down.mp3",cover:g},{name:"06 - Race Gurram.mp3",cover:g}],h=n(4);function x(e){var t=Object(a.createRef)(null),n=Object(a.useRef)(null),r="assets/media/"+e.currentSongName,c=function(){return null===n||void 0===n?void 0:n.current},o=function(){var t=c(),n=t.currentTime,a=t.duration;isNaN(a)||e.onTimeUpdate({currentTime:n,trackDuration:a})},i=function(){c().currentTime=0,e.onEnd()},u=function(){var t=c();e.isPlaying?t.play():t.pause()},m=function(e,n){t.current?t.current[e]=n:t.current=Object(s.a)(Object(s.a)({},t.current),{},Object(h.a)({},e,n))},d=function(){return(null===t||void 0===t?void 0:t.current)||{}};return Object(a.useEffect)((function(){var t,n,a;if((null===(t=d())||void 0===t?void 0:t.songName)!==e.currentSongName&&(!function(){var t=c();!1===t.paused&&t.readyState&&t.pause(),e.onTimeUpdate({currentTime:0,trackDuration:t.duration}),t.load(),e.isPlaying&&t.readyState&&t.play()}(),m("songName",e.currentSongName)),(null===(n=d())||void 0===n?void 0:n.isPlaying)!==e.isPlaying&&(u(),m("isPlaying",e.isPlaying)),(null===(a=d())||void 0===a?void 0:a.defaultTime)!==e.defaultTime)!function(){var t=c();t.readyState&&(t.currentTime=e.defaultTime)}(),m("defaultTime",e.defaultTime);else{var r=c();r.addEventListener("timeupdate",o),r.addEventListener("ended",i),u()}return function(){var e=c();e.removeEventListener("timeupdate",o),e.removeEventListener("ended",i)}}),[e.isPlaying,e.defaultTime,e.songName,e.volume]),Object(l.jsx)("audio",{ref:n,children:Object(l.jsx)("source",{src:r,type:"audio/mp3"})})}var N,S=Object(a.memo)(x),w=(n(14),function(){var e=v().state,t=Object(a.useState)({currentTime:0,defaultTime:0}),n=Object(i.a)(t,2),r=n[0],c=n[1];return Object(l.jsxs)("div",{className:"tracker",children:[Object(l.jsx)(S,{currentSongName:e.currentSong.name,volume:e.playerVolume,isPlaying:e.isSongPlaying,onTimeUpdate:function(e){var t=parseFloat(e.trackDuration/60).toFixed(2),n=parseFloat(e.currentTime/60).toFixed(2),a=e.currentTime/e.trackDuration*100,r=parseInt(a);c({songDuration:t,currentTime:n,progress:r})},defaultTime:r.defaultTime,onEnd:function(e){return console.log("onEnd",e)}}),Object(l.jsxs)("div",{className:"trackTimes",children:[0!==r.currentTime&&Object(l.jsx)("span",{className:"currentTime",children:r.currentTime}),0!==r.songDuration&&Object(l.jsx)("span",{className:"duration",children:r.songDuration})]}),Object(l.jsx)("div",{className:"progressbar",title:r.currentTime,onClick:function(e){var t=Number(r.songDuration||0),n=r.currentTime/r.songDuration*100,a=Math.round(e.pageX/n*t)||0;c(Object(s.a)(Object(s.a)({},r),{},{defaultTime:a}))},children:Object(l.jsx)("span",{id:"progress",className:"progress",style:{width:"".concat(r.progress,"%")}})})]})}),C=(n(15),function(){var e=v(),t=e.state,n=e.dispatch;return Object(l.jsxs)("div",{className:"album-info",children:[t.currentSong&&Object(l.jsxs)("div",{className:"",children:[Object(l.jsx)("p",{className:"song-title",children:t.currentSong.name}),Object(l.jsx)("p",{className:"artist",children:t.currentSong.artist})]}),Object(l.jsxs)("div",{className:"loop-songs",children:[Object(l.jsx)("a",{href:"#",title:"Album",className:"Once"!==t.loopSongs?"active":"",onClick:function(){return n({type:"setLoopSongs"})},children:Object(l.jsx)("i",{className:"fas fa-sync-alt"})}),"This"===t.loopSongs&&Object(l.jsx)("small",{children:"1"})]})]})}),V=(n(16),function(){var e=v(),t=e.state,n=e.dispatch,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=t.volumeIcon,r=Number(e);0===r?a="fa-volume-off":r>.2&&r<.6?a="fa-volume-down":r>.6&&(a="fa-volume-up"),t.playerVolume!==r&&setTimeout((function(){n({type:"setVolume",payload:{playerVolume:r,volumeIcon:a}})}),0)};return Object(a.useEffect)((function(){return r(t.playerVolume),N=setTimeout((function(){n({type:"showVolumeControl",payload:{isVolumeControl:!t.isVolumeControl}})}),2500),function(){}}),[t.playerVolume]),Object(l.jsxs)("div",{className:"volumeControl",onMouseEnter:function(e){clearTimeout(N)},onMouseLeave:function(e){n({type:"showVolumeControl",payload:{isVolumeControl:!t.isVolumeControl}})},children:[Object(l.jsx)("i",{className:"fas ".concat(t.volumeIcon)}),Object(l.jsx)("input",{type:"range",name:"volume",min:"0.0",max:"1.0",step:"0.1",className:"volume",value:t.playerVolume,onChange:function(e){return r(e.target.value)}})]})}),T=(n(17),n(18),function(){var e=v(),t=e.state,n=e.dispatch;return Object(l.jsx)("div",{className:"player-actions",children:Object(l.jsxs)("div",{className:"player-controls ",children:[Object(l.jsx)("a",{href:"#",title:"Volume",onClick:function(){return n({type:"showVolumeControl",payload:{isVolumeControl:!t.isVolumeControl}})},children:Object(l.jsx)("i",{className:"fa ".concat(t.volumeIcon)})}),Object(l.jsx)("a",{href:"#",className:"play-buttons",onClick:function(){return n({type:"previous"})},title:"Previous",children:Object(l.jsx)("i",{className:"fa fa-backward"})}),t.isSongPlaying?Object(l.jsx)("a",{href:"#",className:"play-buttons play",onClick:function(){return n({type:"pause"})},title:"Pause",children:Object(l.jsx)("i",{className:"fa fa-pause"})}):Object(l.jsx)("a",{href:"#",className:"play-buttons play",onClick:function(){return n({type:"play"})},title:"Play",children:Object(l.jsx)("i",{className:"fa fa-play"})}),Object(l.jsx)("a",{href:"#",className:"play-buttons",onClick:function(){return n({type:"next"})},title:"Next",children:Object(l.jsx)("i",{className:"fa fa-forward"})}),Object(l.jsx)("a",{href:"#",title:"Shuffle",className:t.isRandomSongs?"active":"",onClick:function(){return n({type:"random"})},children:Object(l.jsx)("i",{className:"fa fa-random"})})]})})}),P=function(e){var t=e.name,n=e.cover,a=e.isVolumeControl,r=e.className;return Object(l.jsxs)("div",{className:"".concat(r," album-cover"),children:[Object(l.jsx)("img",{src:n,alt:t,id:"cover"}),Object(l.jsx)(w,{}),Object(l.jsx)(C,{}),Object(l.jsx)(T,{}),a&&Object(l.jsx)(V,{})]})};n(19);var L=function(){var e=Object(a.useRef)([]),t=v(),n=t.state,r=t.dispatch,c=Object(a.useState)(""),o=Object(i.a)(c,2),u=o[0],m=o[1];return Object(a.useEffect)((function(){if(!document.querySelector("#id3"))return new Promise((function(e,t){var n=document.createElement("script");n.src="./assets/id3-minimized.js",n.id="id3",n.onload=function(){return e()},document.body.appendChild(n)})).then((function(){(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[];return new Promise((function(a,r){!function t(r){var c,o="./assets/media/"+(null===(c=e[r])||void 0===c?void 0:c.name);window.ID3.loadTags(o,(function(){var c=window.ID3.getAllTags(o),s={title:c.title,album:c.album,artist:c.artist};s.name=e[r].name,n.push(s),r<e.length-1?t(r+1):a(n)}))}(t)}))})(y).then((function(t){e.current=t,r({type:"setSongs",payload:t}),function(e){e&&0!==e.length&&(u||m(e[0].album),0===Object.keys(n.currentSong).length&&r({type:"setCurrentSong",payload:Object(s.a)(Object(s.a)({},e[0]),{},{cover:g})}))}(t)}))})),function(){};r({type:"setSongs",payload:null===e||void 0===e?void 0:e.current})}),[null===e||void 0===e?void 0:e.current]),Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)("div",{className:"music-player",children:[Object(l.jsx)(f,{Heading:u}),Object(l.jsx)(P,{className:"musicPlayer"===n.currentView?"":"hide",cover:n.currentSong.cover,name:n.currentSong.name,isVolumeControl:n.isVolumeControl}),Object(l.jsx)(O,{className:"PlayList"===n.currentView?"":"hide",album:e.current,currentSong:n.currentSong,isSongPlaying:n.isSongPlaying})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(b,{children:Object(l.jsx)(L,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[20,1,2]]]);
//# sourceMappingURL=main.ffc43d5f.chunk.js.map